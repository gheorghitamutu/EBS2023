syntax = "proto3";

option java_package = "org.project.models";
option java_outer_classname = "ProtoComplexSubscription";

enum Operator {
  NONE = 0;
  LOWER_THAN = 1;
  EQUAL_OR_LOWER_THAN = 2;
  EQUAL = 3;
  EQUAL_OR_GREATER_THAN = 4;
  GREATER_THAN = 5;
}

message ConditionDouble {
  Operator operator = 1;
  double value = 2;
}

message ConditionString {
  Operator operator = 1;
  string value = 2;
}

message ComplexPublicationCondition {
  ConditionString city = 1;
  ConditionDouble averageTemperature = 2;
  ConditionDouble averageRain = 3;
  ConditionDouble averageWind = 4;
}

message ComplexSubscription {
  string subscriberId = 1;
  string subscriptionId = 2;
  ComplexPublicationCondition conditions = 3;
  int64 timestamp = 4;
}
